version: 2
models:
  - name: stg_databricks_usage
    group: databricks
    access: private
    meta:
      owner: 'javier.asensio@octoenergy.com'
      team_owner: '!subteam^S02GPV1135F' #@dbt_gatekeepers
    description: |
      Databricks usage data from their system tables. It includes dbus, cluster types, custom metadata
      we send when jobs and endpoint usage/up time.
    columns:
      - name: record_id
        description: Primary key for the record
      - name: account_id
        description: ID of the account this report was generated for 
      - name: workspace_id
        description: ID of the Workspace this usage was associated with
      - name: sku_name
        description: Name of the SKU 
      - name: cloud
        description:  Cloud this usage is relevant for. Possible values are AWS, AZURE, and GCP. 
      - name: usage_start_time
        description: The start time relevant to this usage record  
      - name: usage_end_time
        description: The start time relevant to this usage record 
      - name: usage_date
        description: Date of the usage record, this field can be used for faster aggregation by date  
      - name: custom_tags
        description: Tags applied by the users to this usage  
      - name: usage_unit
        description: Unit this usage is measured in. Possible values include DBUs.  
      - name: usage_quantity
        description: Number of units consumed for this record.  
      - name: usage_metadata
        description: System-provided metadata about the usage, including IDs for compute resources and jobs (if applicable).  
  - name: stg_databricks_prices
    group: databricks
    access: private
    meta:
      owner: 'javier.asensio@octoenergy.com'
      team_owner: '!subteam^S02GPV1135F' #@dbt_gatekeepers
    description: |
      Databricks UC table that keeps the base prices for their SKUs.
    columns:
      - name: price_id
        description:  Primary key for the record
      - name: account_id
        description: ID of the account this report was generated for 
      - name: price_start_time
        description: Date when this price starts being valid
      - name: price_ends_time
        description: Date when this price stops being valid
      - name: price_ends_time
        description: Date when this price stops being valid
      - name: sku_name
        description: Name of the SKU 
      - name: cloud
        description:  Cloud this usage is relevant for. Possible values are AWS, AZURE, and GCP. 
      - name: currency_code 
        description:  Currency used for the pricing 
      - name: price
        description:  cost per dbu